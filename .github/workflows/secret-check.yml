name: Secret Check
on: [workflow_dispatch]
jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Show key presence
        run: |
          if [ -z "${{ secrets.GCP_SERVICE_ACCOUNT_KEY }}" ]; then
            echo "Secret missing" && exit 1
          fi
          echo "Secret present ✅"
      - name: Validate JSON
        run: |
          echo '${{ secrets.GCP_SERVICE_ACCOUNT_KEY }}' | python3 -c "import sys,json; json.load(sys.stdin); print('Valid JSON ✅')"
