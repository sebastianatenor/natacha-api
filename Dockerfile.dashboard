FROM python:3.11-slim

WORKDIR /app

# 1. Copiamos todo el proyecto
COPY . /app

# 2. Instalamos dependencias (incluye health_monitor)
RUN pip install --no-cache-dir -r requirements.txt

# 3. Configuraci√≥n de entorno para Cloud Run
ENV PORT=8080

# 4. Exponemos el puerto esperado
EXPOSE 8080

# 5. Comando de inicio: Streamlit Dashboard
CMD ["streamlit", "run", "dashboard/dashboard.py", "--server.port=8080", "--server.address=0.0.0.0"]
